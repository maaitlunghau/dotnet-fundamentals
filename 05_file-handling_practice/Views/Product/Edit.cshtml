@model Product

<form asp-action="Edit" method="post" enctype="multipart/form-data">
    @* Name Input *@
    <div class="mb-3">
        <label for="Name" class="form-label">
            Name:
        </label>
        <input type="text" class="form-control" placeholder="Enter Name" asp-for="Name">
        <span asp-validation-for="Name" class="text-danger"></span>
    </div>

    @* Price Input *@
    <div class="mb-3">
        <label for="Price" class="form-label">
            Price:
        </label>
        <input type="number" class="form-control" placeholder="Enter Price" asp-for="Price">
        <span asp-validation-for="Price" class="text-danger"></span>
    </div>

    @* Description Input *@
    <div class="mb-3">
        <label for="Description" class="form-label">
            Description:
        </label>
        <textarea asp-for="Description" class="form-control"></textarea>
        <span asp-validation-for="Description" class="text-danger"></span>
    </div>

    @* Image (current) *@
    <div class="mb-3">
        <label for="Image" class="form-label">
            File:
        </label>
        <img src="@Model.ImageUrl" width="150" class="img-thumbnail">
    </div>

    @* Image (new) *@
    <div class="mb-3">
        <label for="Image" class="form-label">
            New Image (optional):
        </label>
        <input type="file" class="form-control" name="Image" accept="image/*" id="imageInput"
            onchange="previewImage(event)">
        <span asp-vaidation-for="Image" class="text-danger"></span>
    </div>
    @* Preview Image *@
    <div class="mb-3">
        <img src="" id="imagePreview" style="max-width: 200px; display: block" class="img-thumbnail">
    </div>

    @* Submit Button *@
    <button type="submit" class="btn btn-primary">
        Submit
    </button>
</form>

<script>
    function previewImage(event) {
        const input = event.target;
        const preview = document.getElementById("imagePreview");

        if (input.files && input.files[0]) {
            const file = input.files[0];

            if (!file.type.startsWith("image/")) {
                alert("Vui lòng chọn một hình ảnh!");
                input.value = "";
                return;
            }

            preview.src = URL.createObjectURL(file);
            preview.style.display = "block";
        }
    }
</script>