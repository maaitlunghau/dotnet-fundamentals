@model Product

<form asp-action="Edit" method="post" enctype="multipart/form-data">
    <div class="mb-3">
        <label for="Name" class="form-label">
            Product Name:
        </label>
        <input type="text" class="form-control" placeholder="Enter Name" asp-for="ProductName">
        <span asp-validation-for="ProductName" class="text-danger"></span>
    </div>

    <div class="mb-3">
        <label for="Price" class="form-label">
            Price:
        </label>
        <input type="number" class="form-control" placeholder="Enter Price" asp-for="Price">
        <span asp-validation-for="Price" class="text-danger"></span>
    </div>

    @* Image (current) *@
    <div class="mb-3">
        <label for="Image" class="form-label">
            Product Image:
        </label>
        <img src="@Model.Image" width="150" class="img-thumbnail">
    </div>

    @* Image (new) *@
    <div class="mb-3">
        <label for="ImageHandling" class="form-label">
            New Image (optional):
        </label>
        <input type="file" class="form-control" name="ImageHandling" accept="image/*" id="imageInput"
            onchange="previewImage(event)">
        <span asp-validation-for="ImageHandling" class="text-danger"></span>
    </div>

    @* Preview Image *@
    <div class="mb-3">
        <img src="" id="imagePreview" style="max-width: 200px; display: block" class="img-thumbnail">
    </div>

    <button type="submit" class="btn btn-primary">
        Submit
    </button>
</form>

<script>
    function previewImage(event) {
        const input = event.target;
        const preview = document.getElementById("imagePreview");

        if (input.files && input.files[0]) {
            const file = input.files[0];

            if (!file.type.startsWith("image/")) {
                alert("Vui lòng chọn một hình ảnh!");
                input.value = "";
                return;
            }

            preview.src = URL.createObjectURL(file);
            preview.style.display = "block";
        }
    }
</script>